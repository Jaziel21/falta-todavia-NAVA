{% extends 'base.html' %}

{% block content %}
<div class="soft-card p-4">
    <h2>✏️ Actualizar Cliente</h2>
    
    <form method="post" action="{% url 'realizar_actualizacion_cliente' cliente.id %}">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">Nombre completo *</label>
                    <input type="text" class="form-control" name="nombre" value="{{ cliente.nombre }}" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email *</label>
                    <input type="email" class="form-control" name="email" value="{{ cliente.email }}" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Teléfono</label>
                    <input type="text" class="form-control" name="telefono" value="{{ cliente.telefono }}">
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">Tipo de cliente *</label>
                    <select class="form-select" name="tipo_cliente" required>
                        <option value="REG" {% if cliente.tipo_cliente == 'REG' %}selected{% endif %}>Regular</option>
                        <option value="VIP" {% if cliente.tipo_cliente == 'VIP' %}selected{% endif %}>VIP</option>
                        <option value="EMP" {% if cliente.tipo_cliente == 'EMP' %}selected{% endif %}>Empresarial</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Dirección</label>
                    <textarea class="form-control" name="direccion" rows="3">{{ cliente.direccion }}</textarea>
                </div>
                <div class="mb-3 form-check form-switch">
                    <input type="checkbox" class="form-check-input" name="activo" id="activo" 
                           {% if cliente.activo %}checked{% endif %}>
                    <label class="form-check-label" for="activo">Cliente activo</label>
                </div>
            </div>
        </div>
        
        <div class="mb-3 p-3 bg-light rounded">
            <h6>Información del sistema:</h6>
            <div class="row">
                <div class="col-md-6">
                    <strong>Registrado:</strong> {{ cliente.fecha_registro|date:"d/m/Y" }}<br>
                    <strong>Creado:</strong> {{ cliente.created_at|date:"d/m/Y H:i" }}
                </div>
                <div class="col-md-6">
                    <strong>Ventas realizadas:</strong> {{ cliente.ventas.count }}<br>
                    <strong>Estado:</strong> 
                    <span class="badge {% if cliente.activo %}bg-success{% else %}bg-danger{% endif %}">
                        {{ cliente.activo|yesno:"Activo,Inactivo" }}
                    </span>
                </div>
            </div>
        </div>
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
            <a href="{% url 'ver_clientes' %}" class="btn btn-secondary me-md-2">Cancelar</a>
            <button type="submit" class="btn btn-warning">Actualizar Cliente</button>
        </div>
    </form>
</div>
{% endblock %}