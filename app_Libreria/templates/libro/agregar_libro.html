{% extends 'base.html' %}

{% block content %}
<div class="soft-card p-4">
    <h2>üìñ Agregar Nuevo Libro</h2>
    
    {% if error %}
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ error }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endif %}
    
    <div class="card shadow-sm">
        <div class="card-body">
            <form method="POST">
                {% csrf_token %}
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">T√≠tulo del Libro *</label>
                            <input type="text" class="form-control" name="titulo" required 
                                   placeholder="Ingresa el t√≠tulo del libro">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ISBN *</label>
                            <input type="text" class="form-control" name="isbn" maxlength="13" required
                                   placeholder="13 caracteres">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">G√©nero *</label>
                            <select class="form-select" name="genero" required>
                                <option value="">Seleccionar g√©nero...</option>
                                {% for codigo, nombre in generos %}
                                    <option value="{{ codigo }}">{{ nombre }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Autor *</label>
                            <select class="form-select" name="autor" required>
                                <option value="">Seleccionar autor...</option>
                                {% for autor in autores %}
                                    <option value="{{ autor.id }}">{{ autor.nombre }} - {{ autor.nacionalidad }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Precio *</label>
                            <input type="number" step="0.01" class="form-control" name="precio" required
                                   placeholder="0.00" min="0">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Stock *</label>
                            <input type="number" class="form-control" name="stock" required
                                   placeholder="0" min="0">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Editorial *</label>
                            <select class="form-select" name="editorial" required>
                                <option value="">Seleccionar editorial...</option>
                                {% for editorial in editoriales %}
                                    <option value="{{ editorial.editorialid }}">
                                        {{ editorial.nombreeditorial }} - {{ editorial.paisorigen }}
                                    </option>
                                {% empty %}
                                    <option value="">No hay editoriales disponibles. Crea una editorial primero.</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{% url 'ver_libros' %}" class="btn btn-secondary me-md-2">
                        ‚Ü©Ô∏è Cancelar
                    </a>
                    <button type="submit" class="btn btn-success">
                        üíæ Guardar Libro
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}